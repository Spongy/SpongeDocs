<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">




<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
     <title>权限 &mdash; Sponge 5.0.0 文档</title>
    
  <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sponge.css" type="text/css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
  <link href='//fonts.googleapis.com/css?family=Source+Code+Pro|Roboto:400italic,700italic,700,400' rel='stylesheet' type='text/css' />
  <link rel="stylesheet" href="../_static/tomorrow.css" type="text/css" />
  <link id="syntax-highlighting-ref" rel="stylesheet" href="../_static/tomorrow_night.css" type="text/css" />
      
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    '../',
      VERSION:     '5.0.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/store.min.js"></script>
    <script type="text/javascript" src="../_static/lights.js"></script>
      <link rel="shortcut icon" href="../_static/favicon.ico"/>
        <link rel="top" title="Sponge 5.0.0 文档" href="../index.html" />
        <link rel="up" title="插件开发" href="index.html" />
        <link rel="next" title="黑名单" href="bans.html" />
        <link rel="prev" title="数据库" href="database.html" />
    
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-59476017-2', 'auto');
    ga('send', 'pageview');

  </script>
    
  <link rel="alternate" hreflang="da" href="/master/da/">
  <link rel="alternate" hreflang="de" href="/master/de/">
  <link rel="alternate" hreflang="en-GB" href="/master/en-GB/">
  <link rel="alternate" hreflang="en-PT" href="/master/en-PT/">
  <link rel="alternate" hreflang="en" href="/master/en/">
  <link rel="alternate" hreflang="es-ES" href="/master/es-ES/">
  <link rel="alternate" hreflang="fi" href="/master/fi/">
  <link rel="alternate" hreflang="fr" href="/master/fr/">
  <link rel="alternate" hreflang="it" href="/master/it/">
  <link rel="alternate" hreflang="ja" href="/master/ja/">
  <link rel="alternate" hreflang="ko" href="/master/ko/">
  <link rel="alternate" hreflang="lt" href="/master/lt/">
  <link rel="alternate" hreflang="nb" href="/master/nb/">
  <link rel="alternate" hreflang="nl" href="/master/nl/">
  <link rel="alternate" hreflang="pl" href="/master/pl/">
  <link rel="alternate" hreflang="pt-BR" href="/master/pt-BR/">
  <link rel="alternate" hreflang="pt-PT" href="/master/pt-PT/">
  <link rel="alternate" hreflang="ru" href="/master/ru/">
  <link rel="alternate" hreflang="uk" href="/master/uk/">
  <link rel="alternate" hreflang="zh-CN" href="/master/zh-CN/">
  <link rel="alternate" hreflang="zh-TW" href="/master/zh-TW/">
  <link rel="alternate" hreflang="x-default" href="/"> 
  </head>
  <body role="document" id="top">
    <div class="topbar">
  <div role="navigation" aria-label="related navigation">
    <div class="sp-logo-container sp-not-mobileview sp-mobileview">
      <a class="sp-logo-link" data-auto-route="true" href="/">
        <img height="40px" id="site-logo" class="logo-big" alt="Sponge Forums" src="../_static/spongelogo.png">
      </a>
      <div class="sp-logo-bg"></div>
      <div class="sp-logo-chevron"><i class="fa fa-fw fa-chevron-down"></i></div>
      <div class="sp-logo-menu sp-skip-handler">
        <ul class="sp-logo-dropdown" id="ddleft">
          <a href="https://www.spongepowered.org"><li><i class="fa-fw fa fa-home"></i>Homepage</li></a>
          <a href="https://forums.spongepowered.org"><li><i class="fa-fw fa fa-comment"></i>Forums</li></a>
          <a href="https://github.com/SpongePowered"><li><i class="fa-fw fa fa-code"></i>Code</li></a>
          <a class="sp-forums-home" href="https://docs.spongepowered.org"><li class="active"><i class="fa-fw fa fa-book"></i>SpongeDocs</li></a>
          <a href="https://jd.spongepowered.org"><li><i class="fa-fw fa fa-graduation-cap"></i>JavaDocs</li></a>
          <a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><li><i class="fa-fw fa fa-plug"></i>Plugins</li></a>
          <a href="https://forums.spongepowered.org/t/sponge-downloads/11448"><li><i class="fa-fw fa fa-download"></i>Get Sponge</li></a>
        </ul>
      </div>
    </div>
    <div class="menu-right">
      <div><i class="fa fa-fw fa-globe"></i></div>
        <ul class="dropdown" id="ddlang">
          <li><a href="/master/da/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/da.png" alt="Flag for Danish"/></a></li>
          <li><a href="/master/de/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/de.png" alt="Flag for German"/></a></li>
          <li><a href="/master/en-GB/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/en-GB.png" alt="Flag for English, United Kingdom"/></a></li>
          <li><a href="/master/en-PT/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/en-PT.png" alt="Flag for Pirate English"/></a></li>
          <li><a href="/master/en/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/en.png" alt="Flag for English"/></a></li>
          <li><a href="/master/es-ES/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/es-ES.png" alt="Flag for Spanish"/></a></li>
          <li><a href="/master/fi/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/fi.png" alt="Flag for Finnish"/></a></li>
          <li><a href="/master/fr/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/fr.png" alt="Flag for French"/></a></li>
          <li><a href="/master/it/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/it.png" alt="Flag for Italian"/></a></li>
          <li><a href="/master/ja/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/ja.png" alt="Flag for Japanese"/></a></li>
          <li><a href="/master/ko/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/ko.png" alt="Flag for Korean"/></a></li>
          <li><a href="/master/lt/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/lt.png" alt="Flag for Lithuanian"/></a></li>
          <li><a href="/master/nb/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/nb.png" alt="Flag for Norwegian Bokmal"/></a></li>
          <li><a href="/master/nl/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/nl.png" alt="Flag for Dutch"/></a></li>
          <li><a href="/master/pl/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/pl.png" alt="Flag for Polish"/></a></li>
          <li><a href="/master/pt-BR/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/pt-BR.png" alt="Flag for Portuguese, Brazilian"/></a></li>
          <li><a href="/master/pt-PT/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/pt-PT.png" alt="Flag for Portuguese"/></a></li>
          <li><a href="/master/ru/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/ru.png" alt="Flag for Russian"/></a></li>
          <li><a href="/master/uk/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/uk.png" alt="Flag for Ukrainian"/></a></li>
          <li><a href="/master/zh-CN/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/zh-CN.png" alt="Flag for Chinese Simplified"/></a></li>
          <li><a href="/master/zh-TW/" class="lang"><img src="//d1ztvzf22lmr1j.cloudfront.net/images/flags/zh-TW.png" alt="Flag for Chinese Traditional"/></a></li>
        </ul>
    </div>
    <div class="menu-right">
      <div><i class="fa fa-fw fa-tag"></i><a>5.0.0</a></div>
        <ul class="dropdown" id="ddvers">
          <li><a href="/master/en/"><i class="fa fa-fw fa-tag"></i> latest</a></li>
          <li><a href="/4.1.0/en/"><i class="fa fa-fw fa-tag"></i> 4.1.0</a></li>
          <li><a href="/3.1.0/en/"><i class="fa fa-fw fa-tag"></i> 3.1.0</a></li>
        </ul>
    </div>
    <div class="menu-right">
      <div title="Toggle syntax highlighting between light and dark" class="lights">
        <i class="fa fa-fw fa-lightbulb-o"></i>
      </div>
    </div>
    <div>
      <ul class="controls">
        <li>|</li>
        
        <li><a href="bans.html" title="Next Page"><i class="fa fa-fw fa-chevron-right"></i></a></li>
        
        <li><a href="#top" title="To the top"><i class="fa fa-fw fa-chevron-up"></i></a></li>
        <li><a href="../index.html" title="Home"><i class="fa fa-fw fa-home"></i></a></li>
        
        <li><a href="database.html" title="Previous Page"><i class="fa fa-fw fa-chevron-left"></i></a></li>
        
        <li>|</li>
        
          <li><a href="https://github.com/SpongePowered/SpongeDocs/blob/master/source/plugin/permissions.rst" title="Edit on GitHub"><i class="fa fa-fw fa-github"></i></a></li>
        
      </ul>
    </div>
    <h3>导航</h3>
  </div>
    </div>
    <div class="container">

      <div class="breadcrumbs">
        <ul>
        <li><a href="../index.html">Sponge 5.0.0 文档</a><i class="fa fa-fw fa-chevron-right"></i></li>
        <li><a href="index.html" accesskey="U">插件开发</a><i class="fa fa-fw fa-chevron-right"></i></li>
        </ul>
      </div> 
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
    <form class="search" action="../search.html" method="get">
      <div class="searchbox-inner">
        <input class="field" type="text" name="q" autocomplete="off" />
        <button class="submit" type="submit"><i class="fa fa-fw fa-search" aria-hidden="true"></i></button>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </div>
    </form>
    <p class="searchtip" style="font-size: 90%"></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3><a href="../index.html">內容目录</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">创建服务器</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../server/getting-started/index.html">入门指南</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../server/getting-started/jre.html">安装 Java</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/getting-started/migrating.html">迁移到 Sponge</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/getting-started/implementations/index.html">选择一个实现</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../server/getting-started/implementations/spongeforge.html">安装SpongeForge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../server/getting-started/implementations/spongevanilla.html">安装 SpongeVanilla</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/getting-started/launch-script.html">创建启动脚本</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/getting-started/port-forward.html">端口转发</a></li>
<li class="toctree-l3"><a class="reference internal" href="../server/getting-started/bungeecord.html">和 BungeeCord 配合使用</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/getting-started/configuration/index.html">配置 Sponge</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../server/getting-started/configuration/hocon.html">HOCON 简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="../server/getting-started/configuration/json.html">JSON 语法</a></li>
<li class="toctree-l4"><a class="reference internal" href="../server/getting-started/configuration/sponge-conf.html">global.conf 文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../server/getting-started/configuration/server-properties.html">server.properties 文件</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../server/management/index.html">服务器管理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../server/management/whitelist.html">管理白名单</a></li>
<li class="toctree-l3"><a class="reference internal" href="../server/management/bans.html">管理—封禁</a></li>
<li class="toctree-l3"><a class="reference internal" href="../server/management/permissions.html">权限管理</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/management/plugins.html">安装插件</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/management/exploit-patches.html">漏洞修复</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/management/performance-tweaks.html">性能调优</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../server/spongineer/index.html">成为 Sponge 专家</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../server/spongineer/commands.html">命令</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/spongineer/troubleshooting.html">故障排查</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/spongineer/logs.html">日志文件</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/spongineer/debugging.html">Debugging</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../server/spongineer/bugreport.html">报告问题</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preparing/index.html">为开发做准备</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../preparing/jdk.html">安装 JDK</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preparing/ide.html">安装 IDE</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preparing/text.html">安装一个文本编辑器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preparing/git.html">安装 Git</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">插件开发</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="buildsystem.html">构建系统</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="workspace/index.html">建立工作目录</a><ul>
<li class="toctree-l3"><a class="reference internal" href="workspace/idea.html">设置 IntelliJ IDEA</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="workspace/eclipse.html">设置 Eclipse</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="project/index.html">设置你的项目</a><ul>
<li class="toctree-l3"><a class="reference internal" href="project/gradle.html">设置 Gradle</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="project/maven.html">设置 Maven</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plugin-identifier.html">插件标识符</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-class.html">插件的主类</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lifecycle.html">插件的生命周期</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="injection.html">依赖注入</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="practices.html">Sponge 插件开发指南</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="optional/index.html">使用 Optional</a><ul>
<li class="toctree-l3"><a class="reference internal" href="optional/basic.html">对于 Optional 的解释</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="optional/usage.html">用法示例</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">日志记录和调试</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="commands/index.html">命令</a><ul>
<li class="toctree-l3"><a class="reference internal" href="commands/creating.html">创建一个命令</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="commands/arguments.html">参数分析</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="commands/flags.html">命令标志</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="commands/childcommands.html">子命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="commands/service.html">命令管理器</a></li>
<li class="toctree-l3"><a class="reference internal" href="commands/commandcallable.html">低级别命令 API</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="event/index.html">事件</a><ul>
<li class="toctree-l3"><a class="reference internal" href="event/listeners.html">事件监听器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="event/causes.html">事件原因</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="event/filters.html">事件过滤</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="event/custom.html">自定义事件</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="assets.html">使用 Asset API</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration/index.html">插件配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="configuration/loaders.html">配置加载器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="configuration/nodes.html">配置节点</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="configuration/serialization.html">序列化对象</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="text/index.html">文本 API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="text/text.html">创建文本</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="text/representations/index.html">序列化文本</a><ul>
<li class="toctree-l4"><a class="reference internal" href="text/representations/formatting-code-legacy.html">格式化与原生字符串</a></li>
<li class="toctree-l4"><a class="reference internal" href="text/representations/xml.html">XML 格式</a></li>
<li class="toctree-l4"><a class="reference internal" href="text/representations/json.html">JSON 格式</a></li>
<li class="toctree-l4"><a class="reference internal" href="text/representations/configurate.html">配置文件格式</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="text/pagination.html">分页</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="text/messagechannels.html">消息通道</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="text/templates.html">文本模板</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data/index.html">数据 API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data/keys.html">使用数据键</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="data/datamanipulators.html">操作数据</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="data/transactions.html">数据操作记录</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="data/serialization.html">序列化数据</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="blocks/index.html">方块</a><ul>
<li class="toctree-l3"><a class="reference internal" href="blocks/concepts.html">概念</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="blocks/accessing.html">访问方块</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="blocks/modifying.html">修改方块</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="blocks/tileentities.html">方块的 Tile Entity</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="blocks/virtualblock.html">虚拟方块更改</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="entities/index.html">实体</a><ul>
<li class="toctree-l3"><a class="reference internal" href="entities/spawning.html">生成一个实体</a></li>
<li class="toctree-l3"><a class="reference internal" href="entities/modifying.html">修改一个实体</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="items/index.html">物品</a><ul>
<li class="toctree-l3"><a class="reference internal" href="items/usage.html">基本用法</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="items/creating.html">物品的创建</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="effects.html">效果</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html">调度器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="services.html">服务</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html">数据库</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">权限</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bans.html">黑名单</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bookview.html">成书</a></li>
<li class="toctree-l2"><a class="reference internal" href="economy/index.html">经济 API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="economy/basics.html">基本概念</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="economy/using.html">使用经济 API</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="economy/practices.html">注意事项</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="economy/implementing.html">实现一个经济 API</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wgen/index.html">世界生成</a><ul>
<li class="toctree-l3"><a class="reference internal" href="wgen/modifiers.html">世界生成修改器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="wgen/customwgen.html">改变世界生成</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="manager.html">插件管理器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="game-profile-manager.html">玩家资料管理器</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="offline-userplayer-data.html">离线玩家数据</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">调试插件</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tab-lists.html">玩家列表</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plugin-meta.html">插件的元数据</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ray-tracing.html">光线追踪</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html">教程</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">向 Sponge 贡献代码</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/guidelines.html">贡献指南</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/howtogit.html">如何使用 Git（Hub）</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/implementation/index.html">参与到 Sponge 的开发工作来</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing/implementation/codestyle.html">代码规范</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/implementation/git-implementation.html">Sponge API 及其实现的 Git 工作流程</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/implementation/pr.html">提交拉取请求</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/implementation/debugging.html">在 IDE 中调试</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/implementation/mixins.html">使用 Mixin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/implementation/datamanipulator.html">实现数据操纵器</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/spongedocs.html">开发文档</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/porting.html">将 Sponge 移植到其他平台</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/versioning.html">版本系统和项目仓库分支结构</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">关于 Sponge 项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/introduction.html">简介</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/faq.html">常见问题及解答</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/structure.html">Sponge 的项目结构</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/future.html">未来计划</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/license.html">许可</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/posting.html">论坛发帖准则</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/rules.html">论坛及 IRC 准则</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/staff.html">项目组成成员</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/glossary.html">Sponge 术语表</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/assets.html">艺术内容</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/history.html">Sponge 的历史</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">下载</a><ul class="simple">
</ul>
</li>
</ul>
<ul class="simple">
</ul>

      </div>
    </div> 

        <div class="document">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body" role="main">
                  
  <div class="section" id="permissions">
<h1>权限<a class="headerlink" href="#permissions" title="永久链接至标题">¶</a></h1>
<div class="section" id="permission">
<h2>Permission 字符串<a class="headerlink" href="#permission" title="永久链接至标题">¶</a></h2>
<p>Permission 字符串对大小写不敏感，其用于决定一个 Subject 可以和不可以做什么。该字符串使用小数点分隔成若干分立的部分。一个 Permission 字符串应该长这样：</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>&lt;PluginID&gt;.&lt;MainGroup&gt;.&lt;Subgroup1&gt;...
</pre></div>
</div>
<p>允许使用的字符有：</p>
<ul class="simple">
<li><p class="first">大写英文字母（A 到 Z）</p>
</li>
<li><p class="first">小写英文字母（a 到 z）</p>
</li>
<li><p class="first">阿拉伯数字（0 到 9）</p>
</li>
<li><p class="first">下划线（_）</p>
</li>
<li><p class="first">短横线（-）</p>
</li>
<li><p class="first">小数点（.）</p>
</li>
</ul>
<div class="section" id="inheritance">
<h3>继承<a class="headerlink" href="#inheritance" title="永久链接至标题">¶</a></h3>
<p>如果一个用户具有 <code class="docutils literal"><span class="pre">myPlugin.commands</span></code> 的权限，那么所有诸如 <code class="docutils literal"><span class="pre">myPlugin.commands.teleport</span></code> 等子权限都将自动拥有，除非它被显式地删除。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">没有诸如 <code class="docutils literal"><span class="pre">myPlugin.commands.*</span></code> 的通配符形式。请使用 <code class="docutils literal"><span class="pre">myPlugin.commands</span></code> 解决问题。</p>
</div>
</div>
<div class="section" id="structure-example">
<h3>结构示例：<a class="headerlink" href="#structure-example" title="永久链接至标题">¶</a></h3>
<p>下面的示例展示了一个构造 Permission 字符串的通常方法，当然按照该结构来并不是必须的。</p>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">myPlugin</span></code></dt>
<dd><ul class="first last simple">
<li><p class="first">给予有关该插件的 <strong>所有</strong> 权限。</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">myPlugin.commands</span></code></dt>
<dd><ul class="first last simple">
<li><p class="first">给予有关该插件的命令的 <strong>所有</strong> 权限。</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">myPlugin.commands.teleport.execute</span></code></dt>
<dd><ul class="first last simple">
<li><p class="first">仅仅给予用户执行指定命令的权限。如果用户没有该权限，那么即便他拥有其他有关于 <cite>teleport</cite> 的权限，他也没有办法运行该命令（拥有该权限的用户只能将自己传送到其所在世界的其他人的位置）。</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">myPlugin.commands.teleport.all</span></code></dt>
<dd><ul class="first last simple">
<li><p class="first">仅仅给予用户一次性传送所有玩家的权限。</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">myPlugin.commands.teleport.worlds</span></code></dt>
<dd><ul class="first last simple">
<li><p class="first">仅仅给予用户传送所有世界的玩家的权限。</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">myPlugin.commands.teleport.worlds.mynetherworld</span></code></dt>
<dd><ul class="first last simple">
<li><p class="first">仅仅给予用户传送到 <em>mynetherworld</em> 的权限。</p>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="permissiondescription">
<h2>权限描述<a class="headerlink" href="#permissiondescription" title="永久链接至标题">¶</a></h2>
<p>一个权限描述是一个 <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/service/permission/PermissionDescription.html">PermissionDescription</a> 对象，用于向服主提供有关于某些权限的详细信息。 <code class="docutils literal"><span class="pre">PermissionDescription</span></code> 是 <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/service/permission/PermissionService.html">PermissionService</a> 可以提供的可选特性。创建权限描述并 <strong>不</strong> 会影响已有的权限是否存在，拥有权限的都有谁，以及其默认值是什么。</p>
<p>权限描述包括：</p>
<ul class="simple">
<li><p class="first">目标 Permission 字符串</p>
</li>
<li><p class="first">一个用于描述的 Text 对象</p>
</li>
<li><p class="first">一个或多个分配规则</p>
</li>
<li><p class="first">提供该权限的插件</p>
</li>
</ul>
<p>如果你有一个诸如 <code class="docutils literal"><span class="pre">World</span></code> 或者 <code class="docutils literal"><span class="pre">ItemType</span></code> 的动态元素，那么你可以使用 <code class="docutils literal"><span class="pre">&lt;TemplateParts&gt;</span></code> 。</p>
<div class="section" id="usage-example">
<h3>用法示例<a class="headerlink" href="#usage-example" title="永久链接至标题">¶</a></h3>
<div class="highlight-text"><div class="highlight"><pre><span></span>import org.spongepowered.api.service.permission.PermissionDescription;
import org.spongepowered.api.service.permission.PermissionDescription.Builder;
import org.spongepowered.api.service.permission.PermissionService;
import org.spongepowered.api.text.Text;
import java.util.Optional;

Optional&lt;Builder&gt; optBuilder = permissionService.newDescriptionBuilder(myPlugin);
if (optBuilder.isPresent()) {
    Builder builder = optBuilder.get();
    builder.id(&quot;myPlugin.commands.teleport.execute&quot;)
           .description(Text.of(&quot;Allows the user to execute the teleport command.&quot;))
           .assign(PermissionDescription.ROLE_STAFF, true)
           .register();
}
</pre></div>
</div>
</div>
<div class="section" id="simple-result">
<h3>简单的结果<a class="headerlink" href="#simple-result" title="永久链接至标题">¶</a></h3>
<div class="highlight-text"><div class="highlight"><pre><span></span>myPlugin.commands.teleport.execute

Description: Allows the user to execute the teleport command.
Role: user
Owner: MyPlugin v1.2.3
</pre></div>
</div>
</div>
<div class="section" id="template-result">
<h3>带有动态元素的结果<a class="headerlink" href="#template-result" title="永久链接至标题">¶</a></h3>
<div class="highlight-text"><div class="highlight"><pre><span></span>myPlugin.commands.teleport.worlds.&lt;World&gt;

Description: Allows the user to teleport to the world &lt;World&gt;.
Role: staff
Owner: MyPlugin v1.2.3
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p class="last">你可能不会为某些父权限组编写描述，例如 <code class="docutils literal"><span class="pre">myPlugin.commands.teleport.worlds</span></code> 或者 <code class="docutils literal"><span class="pre">myPlugin.commands</span></code> 等，因为相应的权限结构和其对应的子权限已经足够描述该权限的意义了。</p>
</div>
</div>
</div>
<div class="section" id="subject">
<h2>权限主体<a class="headerlink" href="#subject" title="永久链接至标题">¶</a></h2>
<p>一个权限主体是一个 <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/service/permission/Subject.html">Subject</a> 对象，持有着若干权限。通过 <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/service/permission/SubjectCollection.html">SubjectCollection</a> 我们可以从 <code class="docutils literal"><span class="pre">PermissionService</span></code> 中获取到权限主体。一些诸如 <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/command/CommandSource.html">CommandSource</a> （比如 <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/entity/living/player/Player.html">Player</a> 等）的对象本身就属于 <code class="docutils literal"><span class="pre">Subject</span></code> 。不过同样有其他多种多样的 <code class="docutils literal"><span class="pre">Subject</span></code> 。任何具有权限的东西都是权限主体，即使它只是将检查委托给一个包含的权限主体。可以向权限主体授予或去除权限。如果权限既不被授予也不被去除，那么其设置将被继承（请参阅后面的内容）。权限主体提供方法来检查他们是否具有某种权限。使用此方法的插件应仅查询其要检查的特定权限，而 PermissionService 的任务才是管理权限及其继承。</p>
<div class="section" id="example">
<h3>示例<a class="headerlink" href="#example" title="永久链接至标题">¶</a></h3>
<p>下面的示例可以用于检查玩家是否允许执行传送命令。</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.entity.living.player.Player</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.world.World</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">canTeleport</span><span class="o">(</span><span class="n">Player</span> <span class="n">subject</span><span class="o">,</span> <span class="n">World</span> <span class="n">targetWorld</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">subject</span><span class="o">.</span><span class="na">hasPermission</span><span class="o">(</span><span class="s">&quot;myPlugin.command.teleport.execute&quot;</span><span class="o">)</span>
            <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">subject</span><span class="o">.</span><span class="na">getWorld</span><span class="o">()</span> <span class="o">==</span> <span class="n">targetWorld</span>
                    <span class="o">||</span> <span class="n">subject</span><span class="o">.</span><span class="na">hasPermission</span><span class="o">(</span><span class="s">&quot;myPlugin.command.teleport.&quot;</span> <span class="o">+</span> <span class="n">targetWorld</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>继承<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h3>
<p>如果 <code class="docutils literal"><span class="pre">Subject</span></code> 被指定了是否拥有给定的权限，那么它将按照指定的方式去做。否则它会继承任何父 <code class="docutils literal"><span class="pre">Subject</span></code> ，而不管父 <code class="docutils literal"><span class="pre">Subject</span></code> 是什么样子的（如用户组或玩家等）。</p>
<p>如果权限主体本身或任何父权限主体都不授予或去除一个权限，那么它将继承于默认的 <code class="docutils literal"><span class="pre">Subject</span></code> 。每个 <code class="docutils literal"><span class="pre">SubjectCollection</span></code> 都定义了自己的默认值。全局和最弱的默认 <code class="docutils literal"><span class="pre">Subject</span></code> 可以从 <code class="docutils literal"><span class="pre">PermissionService</span></code> 获得。插件可以在每个服务器启动期间定义它们自己对默认 <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/service/permission/SubjectData.html">SubjectData</a> 的权限。这允许服主根据自己的需要使用默认的 <code class="docutils literal"><span class="pre">SubjectData</span></code> 来覆盖插件定义的默认值。如果你想为服主提供一个配置指南，请使用 <code class="docutils literal"><span class="pre">PermissionDescription</span></code> 。</p>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">在向用户授予权限前，你应该仔细考虑考虑。你对于这些默认权限的设置相当于你默许所有服主（至少在第一次插件运行时）都接受这些默认值，并且在特殊情况下才会去除相应权限（如果没有插件可用于管理权限，自由去除权限的事甚至无法完成）。插件开发者应该考虑在单人用户的无作弊局域网下，一个玩家加入多人游戏时应有的默认权限。比如一个聊天插件将允许默认情况下发送聊天信息以在基于原版游戏允许做的事的基础上加入自己的特性。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">The default <code class="docutils literal"><span class="pre">Subject</span></code>s&#8217; persistent <code class="docutils literal"><span class="pre">SubjectData</span></code>s take precedence over the transient ones.
For all other <code class="docutils literal"><span class="pre">Subject</span></code>s the transient <code class="docutils literal"><span class="pre">SubjectData</span></code>s take precedence over the persistent ones.</p>
</div>
<p>If neither the Subject, nor any of its parents, nor the defaults assign a value to a permission,
then it is automatically denied.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>Order of precedence in descending order:</p>
<ul class="last">
<li><dl class="first docutils">
<dt>Subject itself</dt>
<dd><ul class="first last simple">
<li>Transient</li>
<li>Persistent</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Parent Subjects</dt>
<dd><ul class="first last simple">
<li>Transient</li>
<li>Persistent</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>SubjectCollection Defaults</dt>
<dd><ul class="first last simple">
<li>Persistent</li>
<li>Transient</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>PermissionService Defaults</dt>
<dd><ul class="first last simple">
<li>Persistent</li>
<li>Transient</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Deny permission</p>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="subjectcollections">
<h2>SubjectCollections<a class="headerlink" href="#subjectcollections" title="永久链接至标题">¶</a></h2>
<p>A container for subjects that can be used to obtain a Subject by name.
These are the default Subject Collections:</p>
<ul>
<li><dl class="first docutils">
<dt>User</dt>
<dd><ul class="first last simple">
<li>Contains all on-line <code class="docutils literal"><span class="pre">Player</span></code>s and all off-line <code class="docutils literal"><span class="pre">User</span></code>s (at least those with none-default settings).</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Group</dt>
<dd><ul class="first last simple">
<li>Contains all group <code class="docutils literal"><span class="pre">Subject</span></code>. Groups are a simple way of structuring a <code class="docutils literal"><span class="pre">Subject</span></code>&#8216;s inheritance tree using
named <code class="docutils literal"><span class="pre">Subject</span></code>s. Groups should be used if a specific subset of <code class="docutils literal"><span class="pre">Subject</span></code>s have additional permission
settings such as a team, faction or role.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>System</dt>
<dd><ul class="first last simple">
<li>Contains other <code class="docutils literal"><span class="pre">Subject</span></code>s used by the server such as the the console and possible remote consoles.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Command Block</dt>
<dd><ul class="first last simple">
<li>Contains all <code class="docutils literal"><span class="pre">Subject</span></code>s for command blocks. These are useful if you would like to run a <code class="docutils literal"><span class="pre">CommandBlock</span></code> only
with the permissions of the creator.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Role Template</dt>
<dd><ul class="first last simple">
<li>Contains all role template subjects that are used in <code class="docutils literal"><span class="pre">PermissionDescription</span></code>s. Useful to lookup all recommended
permissions for a user. These should not be used for inheritance.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">When <code class="docutils literal"><span class="pre">SubjectCollection</span></code>s are queried for a <code class="docutils literal"><span class="pre">Subject</span></code> they will automatically be created, if they do not already
exist. However they might not necessarily show up in <code class="docutils literal"><span class="pre">getAllSubjects()</span></code> unless none-default values are set.</p>
</div>
</div>
<div class="section" id="subjectdata">
<h2>SubjectData<a class="headerlink" href="#subjectdata" title="永久链接至标题">¶</a></h2>
<p>SubjectData are the actual permission stores connected to the Subject.
There are two types of Subject stores:</p>
<ul class="simple">
<li>Transient = Only lasts for the duration of the session, it is never saved</li>
<li>Regular (persistent) = Might be saved somewhere, and therefore be persisted and exist forever. Its recommended for
<code class="docutils literal"><span class="pre">PermissionService</span></code>s to implement a persistent store, however it is not a requirement. It might also depend on the
subject type. If there is no persistence then the transient store will be returned in both methods.</li>
</ul>
<p>Plugin authors should consider whether it is necessary to persist a value when choosing between them.</p>
<ul class="simple">
<li>If it is only for a short time (e.g. during a minigame) then use the transient one.</li>
<li>If it is for a long time or forever (e.g. a promotion to VIP) use the regular (persistent) one.</li>
</ul>
<p>Please refer to the Inheritance section if want to know more about the inheritance and precedence of the transient
and persistent <code class="docutils literal"><span class="pre">SubjectData</span></code>s.</p>
</div>
<div class="section" id="subject-options">
<h2>Subject Options<a class="headerlink" href="#subject-options" title="永久链接至标题">¶</a></h2>
<p>Subjects also provide the possibility to store string options. These are basically key value pairs that can be
assigned and inherited. Unlike the permission strings the keys are not hierarchical and don&#8217;t provide any inheritance
mechanisms themselves, but the key value pairs itself are inherited from parent <code class="docutils literal"><span class="pre">Subject</span></code>s in the same way permissions
are.</p>
</div>
<div class="section" id="contexts">
<h2>Contexts<a class="headerlink" href="#contexts" title="永久链接至标题">¶</a></h2>
<p>If you consider each permission to a privilege or ability to be able to do something, a <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/service/context/Context.html">Context</a> is the
circumstances where that privilege is usable.</p>
<p>You might want to give a <code class="docutils literal"><span class="pre">Subject</span></code> permission to do something, but only when the <code class="docutils literal"><span class="pre">Subject</span></code> is in a certain world,
or in a certain region.</p>
<p>Contexts are accumulated by a <code class="docutils literal"><span class="pre">Subject</span></code>, and are then used by the <code class="docutils literal"><span class="pre">PermissionService</span></code> to decide if the <code class="docutils literal"><span class="pre">Subject</span></code>
has a privilege or not.</p>
<p>Sponge provides some contexts by default, but it is generally down to other plugins to provide additional contexts to
the PermissionService, through a <a class="reference external" href="https://jd.spongepowered.org/5.0.0/org/spongepowered/api/service/context/ContextCalculator.html">ContextCalculator</a>.</p>
<p>When creating contexts for your own plugin please try to avoid conflicts with other plugins (e.g. by prefixing the
context key with your plugin id) unless these contexts are meant to be shared.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">Please make sure that your <code class="docutils literal"><span class="pre">ContextCalculator</span></code> responds as fast as possible as it will get called frequently.</p>
</div>
<div class="section" id="id2">
<h3>示例<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h3>
<p>Your <code class="docutils literal"><span class="pre">ContextCalculator</span></code> may look like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.command.CommandSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.service.context.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.service.context.ContextCalculator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.service.permission.Subject</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.UUID</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleCalculator</span> <span class="kd">implements</span> <span class="n">ContextCalculator</span><span class="o">&lt;</span><span class="n">Subject</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Context</span> <span class="n">IN_ANY_ARENA</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Context</span><span class="o">(</span><span class="s">&quot;myArenaPlugin-inAnyArena&quot;</span><span class="o">,</span> <span class="s">&quot;true&quot;</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Context</span> <span class="n">NOT_ANY_ARENA</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Context</span><span class="o">(</span><span class="s">&quot;myArenaPlugin-inAnyArena&quot;</span><span class="o">,</span> <span class="s">&quot;false&quot;</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ARENA_KEY</span> <span class="o">=</span> <span class="s">&quot;myArenaPlugin-arena&quot;</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">UUID</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">playerArenas</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accumulateContexts</span><span class="o">(</span><span class="n">Subject</span> <span class="n">calculable</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">Context</span><span class="o">&gt;</span> <span class="n">accumulator</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">CommandSource</span><span class="o">&gt;</span> <span class="n">commandSource</span> <span class="o">=</span> <span class="n">calculable</span><span class="o">.</span><span class="na">getCommandSource</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">commandSource</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">commandSource</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="k">instanceof</span> <span class="n">Player</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="n">Player</span> <span class="n">player</span> <span class="o">=</span> <span class="o">(</span><span class="n">Player</span><span class="o">)</span> <span class="n">commandSource</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>

            <span class="kd">final</span> <span class="n">UUID</span> <span class="n">uuid</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="na">getUniqueId</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">playerArenas</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">uuid</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">accumulator</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">IN_ANY_ARENA</span><span class="o">);</span>
                <span class="n">accumulator</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Context</span><span class="o">(</span><span class="n">ARENA_KEY</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">playerArenas</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">uuid</span><span class="o">)));</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">accumulator</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">NOT_ANY_ARENA</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Subject</span> <span class="n">subject</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">context</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">IN_ANY_ARENA</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">context</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">NOT_ANY_ARENA</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">context</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">ARENA_KEY</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">final</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">CommandSource</span><span class="o">&gt;</span> <span class="n">commandSource</span> <span class="o">=</span> <span class="n">subject</span><span class="o">.</span><span class="na">getCommandSource</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">commandSource</span><span class="o">.</span><span class="na">isPresent</span><span class="o">()</span> <span class="o">||</span> <span class="o">!(</span><span class="n">commandSource</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="k">instanceof</span> <span class="n">Player</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">final</span> <span class="n">Player</span> <span class="n">player</span> <span class="o">=</span> <span class="o">(</span><span class="n">Player</span><span class="o">)</span> <span class="n">commandSource</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">IN_ANY_ARENA</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">playerArenas</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">player</span><span class="o">.</span><span class="na">getUniqueId</span><span class="o">()))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">NOT_ANY_ARENA</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">playerArenas</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">player</span><span class="o">.</span><span class="na">getUniqueId</span><span class="o">()))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">ARENA_KEY</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">playerArenas</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">player</span><span class="o">.</span><span class="na">getUniqueId</span><span class="o">()))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">playerArenas</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">player</span><span class="o">.</span><span class="na">getUniqueId</span><span class="o">()).</span><span class="na">equals</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getValue</span><span class="o">()))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ContextCalculator</span></code> can be registered via:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">permissionService</span><span class="o">.</span><span class="na">registerContextCalculator</span><span class="o">(</span><span class="n">contextCalculator</span><span class="o">);</span>
</pre></div>
</div>
</div>
</div>
</div>


                </div>
              </div>
            </div>
          <div class="clearer"></div>
        </div>
        <div class="footer" role="contentinfo">
              &copy; 版权所有 2014-2016, Sponge Contributors.
            由 <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3 创建。
        </div>
    </div>
  </body>
</html>